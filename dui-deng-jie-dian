#!/bin/bash

# 定义对等节点数组
peers=(
    "47f61921b54a652ca5241e2a7fc4ed8663091e89@178.63.18.157:19656"
    "c40528f5674b281dfe8a799ba2475782f0b889c7@178.18.240.22:43456"
    "0d03e79ef79687421ac6f4b1ddd6add67dd2d6a0@65.109.83.40:28156"
    "f9fef92013828d8669712224299136b4632b4904@65.109.113.228:60556"
    "7962edd332b1a2293ba6c865aa1f001d6b7cc460@75.119.151.235:43456"
    "560162c4502aea50d271b66d220fadeb5cd17038@37.27.68.29:22656"
    "617df4eeca8779a83d980aba7ff6617bf05a6489@65.109.52.247:63656"
)

# 遍历对等节点并检查连接性
for peer in "${peers[@]}"; do
    # 提取IP和端口
    address=$(echo $peer | cut -d '@' -f 2)
    ip=$(echo $address | cut -d ':' -f 1)
    port=$(echo $address | cut -d ':' -f 2)

    echo "检查对等节点 $ip:$port 的连接性..."

    # 使用nc（netcat）检查连接
    nc -z -v -w 5 $ip $port
    if [ $? -eq 0 ]; then
        echo "对等节点 $ip:$port 连接成功"
    else
        echo "对等节点 $ip:$port 无法连接"
    fi
done
